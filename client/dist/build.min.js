var app=angular.module("glint",["glint.services","glint.ideas","glint.votes"]).filter("moment",function(){return function(a){return moment(a).fromNow()}}),glintServices=angular.module("glint.services",[]);glintServices.factory("Ideas",function(a){var b=function(){return a({method:"GET",url:"/api/ideas"}).then(function(a){return a.data})["catch"](function(a){console.error("getIdeas error",a)})},c=function(b){return a({method:"POST",url:"/api/ideas",data:b}).then(function(a){return a.data})["catch"](function(a){console.error("createIdeas error",a)})};return{getIdeas:b,createIdea:c}}),glintServices.factory("Votes",function(a){var b=function(b,c){return a({method:"PUT",url:"/api/votes/:"+c,data:b}).then(function(a){return a.data})["catch"](function(a){console.error("updateVotes error",a)})};return{updateVotes:b}}),angular.module("glint.ideas",[]).controller("IdeasCtrl",function(a){var b=this;b.data={ideas:[]},b.idea={},b.postSuccess=!1,b.displayIdeas=function(){a.getIdeas().then(function(a){b.data.ideas=a})["catch"](function(a){console.error("displayIdeas error",a)})},b.submitIdea=function(){_.escape(b.idea.title);var c=JSON.stringify(b.idea);a.createIdea(c).then(function(){b.postSuccess=!0,b.displayIdeas()})["catch"](function(a){console.error("createIdea error",a)})},b.displayIdeas()}),angular.module("glint.votes",[]).controller("VotesCtrl",function(a){var b=this;b.upvote=function(b){voteCount=b.votes++,id=b._id,a.updateVotes(voteCount,id).then(function(a){console.log("upvote success",a)})["catch"](function(a){console.error("upvote error",a)})},b.downvote=function(b){voteCount=b.votes--,id=b._id,a.updateVotes(voteCount,id).then(function(a){console.log("downvote success",a)})["catch"](function(a){console.error("downvote error",a)})}});